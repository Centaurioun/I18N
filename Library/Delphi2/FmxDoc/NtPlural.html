<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<title>NtPlural</title>
<link rel="StyleSheet" type="text/css" href="pasdoc.css">
</head>
<body bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#800080" alink="#FF0000">
<h1 class="unit">Unit NtPlural</h1>
<table class="sections wide_list">
<tr>
<td><a class="section"  href="#%40Description">Description</a></td><td>Uses</td><td><a class="section"  href="#%40Classes">Classes, Interfaces, Objects and Records</a></td><td>Functions and Procedures</td><td><a class="section"  href="#%40Types">Types</a></td><td>Constants</td><td>Variables</td></tr></table>
<a name="%40Description"></a><h2 class="description">Description</h2>
<p>
Implements a plural enabled Format function <a class="normal"  href="NtPlural.TNtPlural.html#Format">TNtPlural.Format</a>.</p>
<p>


<p>Most languages have only single and plural forms. However this is not case with every language. Asian languages do not have plural form at all. They only have single form. Most Slavic languages have three forms: singular, plural and one between them (dual or paucal). Sometimes zero is handled as plural, sometimes as singular. Some languages have four different forms. Arabic has six different forms.

<p>This is why you can not use the standard Format if you want to create grammatically correct dynamic messages that contain counts. Instead you can use <a class="normal"  href="NtPlural.TNtPlural.html#Format">TNtPlural.Format</a> function. It works little bit like GetText's ngettext funtion. You pass combined pattern and count parameter. The functions calculates what pattern to use based on the passed count parameter and returns that pattern.

<p>In English and most Western languages this is very simple. There are only two items in the combined pattern: singular and plural. If count is 1 then the singualar pattern is used. If the count is other than 1 then the plural pattern is used.

<p>If you have something like this

<p><code>str := Format('%d files', [fileCount]);</code>

<p>and you want to localize it convert code to

<p></p>

<pre class="longcode">
<span class="pascal_keyword">resourcestring</span>
  SFileCountPlural = <span class="pascal_string">'one;%d file;other;%d files'</span>;
<span class="pascal_numeric"></span>...
  str := TNtPlural.Format(SFileCountPlural, fileCount, [fileCount]);
</pre>

<p>

<p>As you can see instead of single pattern the new pattern contains two parts: singular and plural (note that English contains two indexes). Separate parts with ; character. Add a plural form code in the begining of each part.

<p>Plural form codes are: zero is for 0 one is for singular two is for dual few is for trial, paucal, sexal, minority plural and plural-100 many is for large plural other is for plural

<p>Other part should be on any string. If the language requires more forms add them too. In addition you can add zero, one or two parts to any string. For example following are valid for English: &quot;one;One file;other;%d files&quot; &quot;zero;No files;one;One file;other;%d files&quot; &quot;zero;No files;one;One file;two;Two files;other;%d files&quot;

<p>If you pattern contains ; characters you must double them 'Item; %d car(s)' -&gt; 'one;Item;; %d car;other;Item;; %d cars'

<p>Remember to end the resource string item name with Plural. That way NewTool can identify the pattern as multipattern string and it can enable advanced plural translation editor.

<p>Plural engine need to know the language that the application uses. Compiled application file does not contain this information. This is why you should create a resource string that contains the locale id and set that value to <code>NtDefault.DefaultLocale</code>. A good place to set <code>NtDefault.DefaultLocale</code> is the initialization block of the main unit.

<p></p>

<pre class="longcode">
<span class="pascal_keyword">unit</span> Unit1;
<span class="pascal_numeric"></span>...
<span class="pascal_keyword">resourcestring</span>
  SNtLocale = <span class="pascal_string">'en'</span>;
<span class="pascal_keyword">initialization</span>
  DefaultLocale := SNtLocale;
<span class="pascal_keyword">end</span>.
</pre>

<p>

<p>If you name the resource string as <b>SNtLocale</b> NewTool automatically translates it to hold the locale code of the target language. So German column will have &quot;de&quot; and French colum will have &quot;fr&quot;.

<p><i>See Samples\Delphi\VCL\Plural</i> or <i>Samples\Delphi\FMX\Plural</i> samples to see how to use the unit.</p>
<a name="%40Uses"></a><h2 class="overview">Overview</h2>
<a name="%40Classes"></a><h3 class="cio">Classes, Interfaces, Objects and Records</h3>
<table class="classestable wide_list">
<tr class="listheader">
<th class="itemname">Name</th>
<th class="itemdesc">Description</th>
</tr>
<tr class="list">
<td class="itemname">Class&nbsp;<a class="bold"  href="NtPlural.TPluralPattern.html"><code>TPluralPattern</code></a></td>
<td class="itemdesc">Class that contain one pattern.</td>
</tr>
<tr class="list2">
<td class="itemname">Class&nbsp;<a class="bold"  href="NtPlural.TPluralParameter.html"><code>TPluralParameter</code></a></td>
<td class="itemdesc">Class that contains patterns of one plural enabed parameter.</td>
</tr>
<tr class="list">
<td class="itemname">Class&nbsp;<a class="bold"  href="NtPlural.TPluralString.html"><code>TPluralString</code></a></td>
<td class="itemdesc">Class that contains patterns of a single plural enabled string.</td>
</tr>
<tr class="list2">
<td class="itemname">Class&nbsp;<a class="bold"  href="NtPlural.TNtPlural.html"><code>TNtPlural</code></a></td>
<td class="itemdesc">Static class that contains plural routines.</td>
</tr>
</table>
<a name="%40Types"></a><h3 class="summary">Types</h3>
<table class="summary wide_list">
<tr class="list">
<td class="itemcode"><code><b><a   href="NtPlural.html#TPluralKind">TPluralKind</a></b> = (...);</code></td>
</tr>
<tr class="list2">
<td class="itemcode"><code><b><a   href="NtPlural.html#TPluralForm">TPluralForm</a></b> = (...);</code></td>
</tr>
<tr class="list">
<td class="itemcode"><code><b><a   href="NtPlural.html#TPluralIndexProc">TPluralIndexProc</a></b> = function(count: Cardinal): <a   href="NtPlural.html#TPluralForm">TPluralForm</a>;</code></td>
</tr>
</table>
<h2 class="description">Description</h2>
<h3 class="detail">Types</h3>
<table class="detail wide_list">
<tr class="list">
<td class="itemcode"><a name="TPluralKind"></a><code><b>TPluralKind</b> = (...);</code></td>
</tr>
<tr><td colspan="1">
<p>
This type specifies the plural algorithm.</p>
<p>
 The algorithm is named based on the main language of the group. For example pkJapanese is not only applied to Japanese but many other languages (expecially Asian ones).</p>
<h6 class="description_section">Values</h6>
<ul>
<li>
pkDefault: Language that has same plural forms as English: singular and plural.</li>
<li>
pkArabic: Language that has same plural forms as Arabic: six different forms.</li>
<li>
pkCzech: Language that has same plural forms as Czech: singular, paucal (2-4) and plural.</li>
<li>
pkFrench: Language that has same plural forms as French: singular (0-1) and plural.</li>
<li>
pkIcelandic: Language that has same plural forms as Icelandic: singular (1, 11, 21, ...) and plural.</li>
<li>
pkIrish: Language that has same plural forms as Irish: singular, dual and plural.</li>
<li>
pkJapanese: Language that has same plural forms as Japanese: only singular.</li>
<li>
pkLatvian: Language that has same plural forms as Latvian: zero, singular and plural.</li>
<li>
pkLithuanian: Language that has same plural forms as Lithuanian: singular (1, 11, 21, ...), dual (2, 12, 22, ...) and plural.</li>
<li>
pkMacedonian: Language that has same plural forms as Macedonian: singular, dual and plural.</li>
<li>
pkMaltese: Language that has same plural forms as Maltese</li>
<li>
pkPolish: Language that has same plural forms as Polish: singular, paucal and plural.</li>
<li>
pkRomanian: Language that has same plural forms as Romanian: singular, few and plural.</li>
<li>
pkRussian: Language that has same plural forms as Russian: singular, paucal and plural.</li>
<li>
pkSlovenian: Language that has same plural forms as Slovenian: singular, dual, few and plural.</li>
<li>
pkWelsh: Language that has same plural forms as Welsh</li>
</ul>
</td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="itemcode"><a name="TPluralForm"></a><code><b>TPluralForm</b> = (...);</code></td>
</tr>
<tr><td colspan="1">
<p>
This type specifies the plural form.</p>
<h6 class="description_section">Values</h6>
<ul>
<li>
pfZero: Nullar</li>
<li>
pfOne: Singular</li>
<li>
pfTwo: Dual</li>
<li>
pfFew: Trial, paucal, sexal, minority plural or plural-100</li>
<li>
pfMany: Greater paucal</li>
<li>
pfOther: Plural or universal</li>
</ul>
</td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="itemcode"><a name="TPluralIndexProc"></a><code><b>TPluralIndexProc</b> = function(count: Cardinal): <a   href="NtPlural.html#TPluralForm">TPluralForm</a>;</code></td>
</tr>
<tr><td colspan="1">
<p>
Function that calculates the group index.</p>
<p>
  </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>count</dt>
<dd>Count value.</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">The group where the count belongs to.</p></td></tr>
</table>
</body></html>
